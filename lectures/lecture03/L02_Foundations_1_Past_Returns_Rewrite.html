<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Investments - L02 Foundations 1: Past Returns</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">
      Investments
      </li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">Investments</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Lectures</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Lecture 1: The Investment Environment</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture01/lecture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pre-class Reading</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Lecture 2: Foundations of Financial Markets</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture02/lecture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pre-class Reading</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture02/lab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Lecture 3: Measuring and Comparing Returns</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture03/lecture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pre-class Reading</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture03/lab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Lecture 4: Measuring Risk and Expected Return</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture04/lecture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pre-class Reading</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture04/lab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Lecture 5: Portfolio Risk and Returns</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture05/lecture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pre-class Reading</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture05/lab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
 <span class="menu-text">Lecture 6: Optimal Capital Allocation</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture06/lecture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pre-class Reading</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture06/lab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">
 <span class="menu-text">Lecture 7: Mean-Variance Portfolio Optimization</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture07/lecture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pre-class Reading</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture07/lab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">
 <span class="menu-text">Lecture 8: Optimal Asset Allocation</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture08/lecture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pre-class Reading</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture08/lab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false">
 <span class="menu-text">Lecture 9: Review Session</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/lecture09/lab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#lecture-overview" id="toc-lecture-overview" class="nav-link" data-scroll-target="#lecture-overview"><span class="header-section-number">2</span> Lecture overview</a></li>
  <li><a href="#holding-period-return-hpr" id="toc-holding-period-return-hpr" class="nav-link" data-scroll-target="#holding-period-return-hpr"><span class="header-section-number">3</span> Holding period return (HPR)</a>
  <ul class="collapse">
  <li><a href="#formula-stocks" id="toc-formula-stocks" class="nav-link" data-scroll-target="#formula-stocks"><span class="header-section-number">3.1</span> Formula (stocks)</a></li>
  <li><a href="#example-1-hpr-and-its-components" id="toc-example-1-hpr-and-its-components" class="nav-link" data-scroll-target="#example-1-hpr-and-its-components"><span class="header-section-number">3.2</span> Example 1: HPR and its components</a></li>
  </ul></li>
  <li><a href="#total-return-compounding" id="toc-total-return-compounding" class="nav-link" data-scroll-target="#total-return-compounding"><span class="header-section-number">4</span> Total return (compounding)</a>
  <ul class="collapse">
  <li><a href="#formula" id="toc-formula" class="nav-link" data-scroll-target="#formula"><span class="header-section-number">4.1</span> Formula</a></li>
  <li><a href="#example-2-total-return-from-a-sequence-of-monthly-returns" id="toc-example-2-total-return-from-a-sequence-of-monthly-returns" class="nav-link" data-scroll-target="#example-2-total-return-from-a-sequence-of-monthly-returns"><span class="header-section-number">4.2</span> Example 2: Total return from a sequence of monthly returns</a></li>
  </ul></li>
  <li><a href="#geometric-average" id="toc-geometric-average" class="nav-link" data-scroll-target="#geometric-average"><span class="header-section-number">5</span> Geometric average</a>
  <ul class="collapse">
  <li><a href="#formula-1" id="toc-formula-1" class="nav-link" data-scroll-target="#formula-1"><span class="header-section-number">5.1</span> Formula</a></li>
  <li><a href="#example-3-geometric-average-corresponding-to-a-three-month-track-record" id="toc-example-3-geometric-average-corresponding-to-a-three-month-track-record" class="nav-link" data-scroll-target="#example-3-geometric-average-corresponding-to-a-three-month-track-record"><span class="header-section-number">5.2</span> Example 3: Geometric average corresponding to a three-month track record</a></li>
  </ul></li>
  <li><a href="#real-returns-inflation" id="toc-real-returns-inflation" class="nav-link" data-scroll-target="#real-returns-inflation"><span class="header-section-number">6</span> Real returns (inflation)</a>
  <ul class="collapse">
  <li><a href="#relationship-between-nominal-and-real-returns" id="toc-relationship-between-nominal-and-real-returns" class="nav-link" data-scroll-target="#relationship-between-nominal-and-real-returns"><span class="header-section-number">6.1</span> Relationship between nominal and real returns</a></li>
  <li><a href="#example-4-real-total-return-over-three-months" id="toc-example-4-real-total-return-over-three-months" class="nav-link" data-scroll-target="#example-4-real-total-return-over-three-months"><span class="header-section-number">6.2</span> Example 4: Real total return over three months</a></li>
  </ul></li>
  <li><a href="#real-world-application" id="toc-real-world-application" class="nav-link" data-scroll-target="#real-world-application"><span class="header-section-number">7</span> Real-World Application</a>
  <ul class="collapse">
  <li><a href="#data-sources" id="toc-data-sources" class="nav-link" data-scroll-target="#data-sources"><span class="header-section-number">7.1</span> Data sources</a></li>
  <li><a href="#workflow-high-level" id="toc-workflow-high-level" class="nav-link" data-scroll-target="#workflow-high-level"><span class="header-section-number">7.2</span> Workflow (high-level)</a></li>
  <li><a href="#what-to-submit-practice" id="toc-what-to-submit-practice" class="nav-link" data-scroll-target="#what-to-submit-practice"><span class="header-section-number">7.3</span> What to submit / practice</a></li>
  </ul></li>
  <li><a href="#key-takeaways" id="toc-key-takeaways" class="nav-link" data-scroll-target="#key-takeaways"><span class="header-section-number">8</span> Key Takeaways</a></li>
  <li><a href="#key-formulas-summary" id="toc-key-formulas-summary" class="nav-link" data-scroll-target="#key-formulas-summary"><span class="header-section-number">9</span> Key Formulas Summary</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">L02 Foundations 1: Past Returns</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>When we talk about “performance” in investments, we are almost always talking about <strong>returns</strong>. Returns are the common language that lets you compare a $500 stock to a $50 stock, a stock to a bond, or your portfolio to a benchmark—across different time periods and different price levels. In this lecture we focus on <em>past</em> returns, not because the past perfectly predicts the future, but because past-return calculations are the starting point for most of what we do next: estimating expected returns, measuring risk, evaluating managers, and building intuition about how wealth grows (or shrinks) over time.</p>
<p>A subtle theme will run through the entire lecture: <strong>time matters</strong>. A return measured over one period (say, a month) is not the same object as the return over many periods (say, five years), and the way we connect those pieces is through <strong>compounding</strong>. We also confront one more real-world complication: a nominal return can look “good” while purchasing power barely changes if inflation is high. That’s why we end by translating nominal returns into <strong>real returns</strong>.</p>
</section>
<section id="lecture-overview" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="lecture-overview"><span class="header-section-number">2</span> Lecture overview</h2>
<p>We discuss several key quantities we frequently use to describe a stock’s performance (usually in a past period):</p>
<ul>
<li>Holding period return<br>
</li>
<li>Total return (compounding)<br>
</li>
<li>Geometric average of returns<br>
</li>
<li>Real returns (adjusting for inflation)</li>
</ul>
<p>We then work through a real world application where we use the above quantities to describe the performance of Tesla (TSLA) over the past 5 years.</p>
<p>Before we dive into each one, it helps to see how they fit together:</p>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Measure</th>
<th>Core question it answers</th>
<th>Built from</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Holding period return (HPR)</td>
<td>“What did I earn over <em>one</em> holding period, including dividends?”</td>
<td>Start price, end price, dividends</td>
</tr>
<tr class="even">
<td>Total return</td>
<td>“How much did $1 grow over <em>many</em> periods?”</td>
<td>Compounding (multiplying) period returns</td>
</tr>
<tr class="odd">
<td>Geometric average</td>
<td>“What constant per-period return matches that total growth?”</td>
<td>Total return, then take an (N)th root</td>
</tr>
<tr class="even">
<td>Real return</td>
<td>“How much did purchasing power grow after inflation?”</td>
<td>Nominal return and inflation</td>
</tr>
</tbody>
</table>
</section>
<section id="holding-period-return-hpr" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="holding-period-return-hpr"><span class="header-section-number">3</span> Holding period return (HPR)</h2>
<p>The <strong>holding period return (HPR)</strong> answers the most basic performance question an investor can ask:</p>
<blockquote class="blockquote">
<p>“If I buy the asset at the beginning of the period and sell it at the end, how much did I make (or lose), including any cash paid out along the way?”</p>
</blockquote>
<p>That “including cash paid out” clause is crucial. For stocks, cash payouts come mainly from <strong>dividends</strong> (and occasionally other distributions). If you ignore dividends, you can understate a stock’s total payoff—especially for mature dividend-paying firms. HPR gives us a clean way to measure performance over <em>one</em> holding period, and it also provides the building block we will compound when we study multi-period performance.</p>
<section id="formula-stocks" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="formula-stocks"><span class="header-section-number">3.1</span> Formula (stocks)</h3>
<p>Let:</p>
<ul>
<li>(P_{T_1}) = stock price at the start of the holding period (time (T_1))<br>
</li>
<li>(P_{T_2}) = stock price at the end of the holding period (time (T_2))<br>
</li>
<li>(D_{T_2}) = total dividends paid <em>during</em> the holding period (often treated as paid by (T_2) for “end-of-period” accounting)</li>
</ul>
<p>Then the <strong>net holding period return</strong> from (T_1) to (T_2) is:</p>
<p>[ HPR_{T_1 T_2} = - 1 ]</p>
<p>It is often useful to rewrite HPR as a sum of two parts:</p>
<p>[ HPR_{T_1 T_2} = <em>{} ;+; </em>{} ]</p>
<p>This decomposition matters because it tells you <em>where</em> the return came from. Some stocks deliver most of their return through price appreciation (growth stocks), while others deliver more through dividend income (income stocks). Later, when we discuss portfolio objectives, taxes, and factor exposures, it will be helpful to distinguish “price return” from “cash yield.”</p>
</section>
<section id="example-1-hpr-and-its-components" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="example-1-hpr-and-its-components"><span class="header-section-number">3.2</span> Example 1: HPR and its components</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Example</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Solution</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Suppose you buy a share of TSLA for (P_{0}=$420). Two years later you sell it for (P_{2}=$520). Over the two-year holding period you received dividends totaling (D=$10) per share.</p>
<ol type="1">
<li>What is the holding period return (HPR) over the two years?<br>
</li>
<li>What portion of the return came from capital gains vs.&nbsp;dividend yield?</li>
</ol>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p><strong>Step 1: Compute net HPR.</strong></p>
<p>[ HPR = - 1 = - 1 = - 1 ]</p>
<p>Compute the ratio:</p>
<p>[ = 1.2619048 ]</p>
<p>So:</p>
<p>[ HPR - 1 = 0.2619 ;=; 26.19% ]</p>
<p><strong>Step 2: Decompose into capital gains and dividend yield.</strong></p>
<p>Capital gains (price return):</p>
<p>[ = = = 23.81% ]</p>
<p>Dividend yield over the holding period:</p>
<p>[ = = 2.381% ]</p>
<p>Check that they add up:</p>
<p>[ 23.81% + 2.381% % ]</p>
<p>So, most of the two-year return came from <strong>price appreciation</strong>, with a smaller contribution from dividends.</p>
</div>
</div>
</div>
</section>
</section>
<section id="total-return-compounding" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="total-return-compounding"><span class="header-section-number">4</span> Total return (compounding)</h2>
<p>HPR is a <em>single-period</em> return. But investors and researchers often need to summarize performance over <strong>many</strong> periods—months, quarters, or years—especially when we have return data as a time series.</p>
<p>The key idea is that wealth grows through <strong>compounding</strong>. If you earn 10% and then -5%, the -5% applies to the <em>new</em> wealth level after the first period’s gain. That is why multi-period performance is built by multiplying <strong>gross returns</strong>.</p>
<p>This also explains a common intuition trap: a +50% return followed by a -50% return does <em>not</em> bring you back to break-even. Starting from $100, +50% takes you to $150; then -50% takes you to $75. Compounding makes losses “hurt” more than equal-sized gains help.</p>
<section id="formula" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="formula"><span class="header-section-number">4.1</span> Formula</h3>
<p>Let (R_{1}, R_{2}, , R_{N}) be the <strong>net returns</strong> earned in each of (N) consecutive subperiods. (For example, these could be monthly returns for (N) months.)</p>
<p>Define each <strong>gross return</strong> as (1+R_i).</p>
<p>Then the <strong>gross total return</strong> over the full horizon is:</p>
<p>[ 1 + TR = _{i=1}^{N}(1+R_i) ]</p>
<p>and the <strong>net total return</strong> is:</p>
<p>[ TR = _{i=1}^{N}(1+R_i) - 1 ]</p>
<p>Total return is the right measure when the question is “How much did $1 invested at the start grow to by the end?” It is also what you need for wealth-index charts, for verifying portfolio accounting, and for linking performance across different horizons.</p>
</section>
<section id="example-2-total-return-from-a-sequence-of-monthly-returns" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="example-2-total-return-from-a-sequence-of-monthly-returns"><span class="header-section-number">4.2</span> Example 2: Total return from a sequence of monthly returns</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Example</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Solution</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>Suppose TSLA had the following monthly net returns over the last three months:</p>
<ul>
<li>Month 1: (R_1 = 10%)<br>
</li>
<li>Month 2: (R_2 = -5%)<br>
</li>
<li>Month 3: (R_3 = 12%)</li>
</ul>
<p>What was the <strong>net total return</strong> over the three-month period?</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>Convert each monthly net return to a gross return and multiply:</p>
<p>[ 1 + TR = (1+R_1)(1+R_2)(1+R_3) = (1.10)(0.95)(1.12) ]</p>
<p>Multiply step-by-step:</p>
<ul>
<li>(1.10 = 1.045)<br>
</li>
<li>(1.045 = 1.1704)</li>
</ul>
<p>So the gross total return is (1.1704), which means the net total return is:</p>
<p>[ TR = 1.1704 - 1 = 0.1704 = 17.04% ]</p>
<p>Interpretation: $1 invested at the start of Month 1 becomes $1.1704 after Month 3.</p>
</div>
</div>
</div>
</section>
</section>
<section id="geometric-average" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="geometric-average"><span class="header-section-number">5</span> Geometric average</h2>
<p>Now suppose you know the returns in each subperiod (like monthly returns), and you compute the total return over the entire horizon. A natural next question is:</p>
<blockquote class="blockquote">
<p>“What constant per-period return would produce the <em>same</em> total growth over the whole horizon?”</p>
</blockquote>
<p>That constant per-period return is the <strong>geometric average return</strong>. It is sometimes called the <em>compound average growth rate (CAGR)</em> when the period is a year.</p>
<p>The geometric average matters because it respects compounding. It is therefore the right “average return” when you want to describe a multi-period track record on a per-period basis, compare different investments over different horizons, or translate an overall growth experience into an equivalent steady rate. It is also the average you would use if you were telling a story like: “Over this span, the investment grew as if it earned about (x%) per month.”</p>
<section id="formula-1" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="formula-1"><span class="header-section-number">5.1</span> Formula</h3>
<p>Using the same notation as above, if there are (N) subperiods, the geometric average net return is:</p>
<p>[ GA = ^{1/N} - 1 ]</p>
<p>Since the term inside the brackets is the <strong>gross total return</strong>, you will often see:</p>
<p>[ GA = (1+TR)^{1/N} - 1 ]</p>
<p>A quick conceptual note: the <strong>arithmetic average</strong> of returns (simple mean) is useful for some statistical tasks (like estimating a one-period expected return under certain assumptions). But when the goal is “average growth,” the geometric average is the one aligned with how wealth compounds.</p>
</section>
<section id="example-3-geometric-average-corresponding-to-a-three-month-track-record" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="example-3-geometric-average-corresponding-to-a-three-month-track-record"><span class="header-section-number">5.2</span> Example 3: Geometric average corresponding to a three-month track record</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Example</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Solution</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>Using the same three monthly returns from Example 2 (10%, -5%, 12%), what is the <strong>geometric average monthly return</strong> over the three-month period?</p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p>From Example 2 we already computed the gross total return:</p>
<p>[ 1+TR = 1.1704 ]</p>
<p>With (N=3) months, the geometric average monthly return is:</p>
<p>[ GA = (1+TR)^{1/3} - 1 = (1.1704)^{1/3} - 1 ]</p>
<p>Compute the cube root (you can do this with a calculator):</p>
<p>[ (1.1704)^{1/3} ]</p>
<p>So:</p>
<p>[ GA - 1 = 0.0539 = 5.39% ]</p>
<p>Interpretation: earning about <strong>5.39% each month for three months</strong> would generate the same overall three-month growth as the actual volatile sequence of 10%, -5%, and 12%.</p>
</div>
</div>
</div>
</section>
</section>
<section id="real-returns-inflation" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="real-returns-inflation"><span class="header-section-number">6</span> Real returns (inflation)</h2>
<p>So far, every return we computed was a <strong>nominal return</strong>—it measures how many dollars you end up with relative to how many dollars you started with. But investors ultimately care about what money can <em>buy</em>. If prices in the economy are rising, then some of your nominal gain may simply be compensation for inflation.</p>
<p>That is why we compute <strong>real returns</strong>, which adjust nominal returns for inflation and measure the growth of purchasing power. This is especially important when:</p>
<ul>
<li>Comparing performance across decades (inflation regimes can differ a lot),</li>
<li>Evaluating long-horizon goals (retirement, endowments),</li>
<li>Interpreting “high” returns during high-inflation periods.</li>
</ul>
<section id="relationship-between-nominal-and-real-returns" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="relationship-between-nominal-and-real-returns"><span class="header-section-number">6.1</span> Relationship between nominal and real returns</h3>
<p>Let:</p>
<ul>
<li>(R_{}) = nominal net return over the period<br>
</li>
<li>(R_{}) = real net return over the period<br>
</li>
<li>() = inflation rate over the same period</li>
</ul>
<p>The compounding relationship is:</p>
<p>[ 1 + R_{} = (1 + R_{})(1 + ) ]</p>
<p>Solving for the <strong>real net return</strong> gives:</p>
<p>[ R_{} = - 1 = ]</p>
<p>(Those two expressions are algebraically equivalent; the first is usually easiest to remember.)</p>
<p>If you are working with CPI data, a common way to compute period inflation is:</p>
<p>[ _t = - 1 ]</p>
<p>where (CPI_t) is the CPI level in period (t).</p>
</section>
<section id="example-4-real-total-return-over-three-months" class="level3" data-number="6.2">
<h3 data-number="6.2" class="anchored" data-anchor-id="example-4-real-total-return-over-three-months"><span class="header-section-number">6.2</span> Example 4: Real total return over three months</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Example</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Solution</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p>Using the same three-month performance from Example 2 (net total return (TR = 17.04%)), suppose inflation over the three months was (= 2.0%) in total. What is the <strong>real total return</strong> over the three months?</p>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<p>Use the real-return adjustment:</p>
<p>[ R_{} = - 1 ]</p>
<p>Here, (R_{} = TR = 0.1704) and (= 0.02). Plug in:</p>
<p>[ R_{} = - 1 ]</p>
<p>Compute the ratio:</p>
<p>[ ]</p>
<p>So:</p>
<p>[ R_{} - 1 = 0.14745 = 14.75% ]</p>
<p>Interpretation: nominal wealth rose by 17.04%, but <strong>purchasing power</strong> rose by about <strong>14.75%</strong> once we account for inflation.</p>
</div>
</div>
</div>
</section>
</section>
<section id="real-world-application" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="real-world-application"><span class="header-section-number">7</span> Real-World Application</h2>
<p>In practice, you will often be given (or will download) a time series of returns and then be asked to summarize performance over a horizon. The steps below walk you through doing this with monthly TSLA returns and CPI inflation.</p>
<section id="data-sources" class="level3" data-number="7.1">
<h3 data-number="7.1" class="anchored" data-anchor-id="data-sources"><span class="header-section-number">7.1</span> Data sources</h3>
<p><strong>Stock returns (monthly):</strong> The Wharton Research Data Services (WRDS) platform provides access to CRSP data, including monthly stock returns.</p>
<p><strong>Inflation:</strong> The Federal Reserve Economic Data (FRED) database provides the Consumer Price Index (CPI), which is commonly used to measure inflation.</p>
</section>
<section id="workflow-high-level" class="level3" data-number="7.2">
<h3 data-number="7.2" class="anchored" data-anchor-id="workflow-high-level"><span class="header-section-number">7.2</span> Workflow (high-level)</h3>
<ol type="1">
<li><strong>Get access to WRDS.</strong> Create a WRDS account using your school credentials (follow your course syllabus instructions).<br>
</li>
<li><strong>Download TSLA monthly returns from CRSP.</strong> In WRDS, locate the CRSP monthly stock file and download monthly returns for TSLA over your target window (for example, 2019-01 through 2023-12).<br>
</li>
<li><strong>Download CPI data from FRED</strong> over the matching date range (for example, 2019-01-01 to 2024-01-01).<br>
</li>
<li><strong>Align and merge the two datasets by month.</strong> You want each month to have the TSLA return and CPI level (or monthly inflation).<br>
</li>
<li><strong>Compute the performance measures.</strong> Use the formulas from earlier sections to compute:
<ul>
<li>Total return over the full horizon (compound monthly returns),</li>
<li>Geometric average monthly return over the horizon,</li>
<li>Total real return over the horizon (adjust the total nominal return for the horizon’s inflation).</li>
</ul></li>
</ol>
<p>Two practical tips that save headaches:</p>
<ul>
<li><strong>Check missing returns.</strong> If a return is missing, you need a consistent rule (drop the month, fill carefully, or verify the identifier). Missing values can silently break compounding.<br>
</li>
<li><strong>Keep frequencies consistent.</strong> If your returns are monthly, compute inflation monthly (or compute horizon inflation from the CPI endpoints for the horizon). Don’t mix monthly returns with annual inflation without converting one of them.</li>
</ul>
</section>
<section id="what-to-submit-practice" class="level3" data-number="7.3">
<h3 data-number="7.3" class="anchored" data-anchor-id="what-to-submit-practice"><span class="header-section-number">7.3</span> What to submit / practice</h3>
<p>Using your downloaded data:</p>
<ol type="1">
<li>Calculate the total return on TSLA for the entire five-year period.<br>
</li>
<li>Calculate the geometric average return on TSLA over the entire period.<br>
</li>
<li>Calculate the total real return on TSLA for the entire five-year period.</li>
</ol>
<p>(These are direct applications of the formulas above; the main work is careful data handling.)</p>
</section>
</section>
<section id="key-takeaways" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="key-takeaways"><span class="header-section-number">8</span> Key Takeaways</h2>
<p>Past returns are not just “history”—they are the raw material for measurement and comparison in finance. We started with the holding period return because it captures the full payoff from owning a stock over a single interval, including both price changes and dividends. Once we move beyond one period, the logic of compounding takes over: total return across many periods is the product of gross returns, which tells us exactly how an initial investment would have grown. To communicate that multi-period growth as a per-period rate, we use the geometric average—the constant return that would have generated the same ending wealth. Finally, because investors care about purchasing power, we convert nominal returns into real returns by adjusting for inflation. Together, these concepts form a toolkit you will use repeatedly: to summarize a stock’s past performance, to compare investments on a consistent basis, and to prepare return data for deeper analysis of risk and expected return.</p>
</section>
<section id="key-formulas-summary" class="level2" data-number="9">
<h2 data-number="9" class="anchored" data-anchor-id="key-formulas-summary"><span class="header-section-number">9</span> Key Formulas Summary</h2>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Concept</th>
<th>Formula</th>
<th>When to use</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Holding period return (net, stock)</td>
<td>(HPR_{T_1T_2}=-1)</td>
<td>One-period return including dividends/cash flows</td>
</tr>
<tr class="even">
<td>HPR decomposition</td>
<td>(HPR=+)</td>
<td>Split return into capital gains and dividend yield</td>
</tr>
<tr class="odd">
<td>Total return (multi-period, net)</td>
<td>(TR=_{i=1}^{N}(1+R_i)-1)</td>
<td>Compound a sequence of subperiod returns into a horizon return</td>
</tr>
<tr class="even">
<td>Geometric average (per-period)</td>
<td>(GA=^{1/N}-1 = (1+TR)^{1/N}-1)</td>
<td>Convert multi-period growth into an equivalent constant per-period return (CAGR idea)</td>
</tr>
<tr class="odd">
<td>Inflation from CPI</td>
<td>(_t=-1)</td>
<td>Compute period inflation from CPI levels (for real-return calculations)</td>
</tr>
<tr class="even">
<td>Nominal–real relationship</td>
<td>(1+R_{}=(1+R_{})(1+))</td>
<td>Link nominal returns, real returns, and inflation consistently</td>
</tr>
<tr class="odd">
<td>Real return (net)</td>
<td>(R_{}=-1)</td>
<td>Adjust a nominal return for inflation to measure purchasing-power growth</td>
</tr>
</tbody>
</table>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>